**1.导入进CSV还不够完美，虽然不会覆盖原来的内容，但每次导入会把列名一起导入进去**

![image](https://github.com/suvieu/PYTHON-PROGRAM/blob/master/SCRAPING/MTIME/PIC/7.png)

<br>


**2.为什么爬取的数据中有部分电影名为空值？**


![image](https://github.com/suvieu/PYTHON-PROGRAM/blob/master/SCRAPING/MTIME/PIC/8.png)

**A:空值的电影都为只有英文名的电影，因为我抓取电影名的正则表达式写的<a title=\\"(.*?)/
即抓取<a title=\\"到下一个/之间的字符串,但如果某部电影名只有英文，那么这之间就是空的**


<br>

**3.用tosql的方法抓取到了189部电影，和实际相比少了6部，为什么？**

**A:因为设置了电影名为主键，多个空值作为重复项无法存入数据库。**

<br>


**4.如何绕过时光网的反爬？(要求输入字母验证码)**

**A:使用tesseract和pytesseract库**

### **首先安装tesseract**

**下载地址：https://digi.bib.uni-mannheim.de/tesseract/ 选择对应版本下载安装**

**配置环境变量，我添加了四个地方** 

**1.用户变量里的path**

![Image](https://github.com/suvieu/PYTHON-PROGRAM/blob/master/SCRAPING/MTIME/PIC/9.png)

**2.系统变量里的path要添加两个地方**

![Image](https://github.com/suvieu/PYTHON-PROGRAM/blob/master/SCRAPING/MTIME/PIC/10.png)

**3.系统变量还要单独再添加一个变量

![Image](https://github.com/suvieu/PYTHON-PROGRAM/blob/master/SCRAPING/MTIME/PIC/11.png)

**接下来安装pytesseract**

**找到python安装目录下的Lib\site-packages\pytesseract 文件，打开**

**找到tesseract_cmd，修改为 'D:/tesseract/tesseract.exe'**

<br>

### **pytesseract的使用**

```python
from PIL import Image
import pytesseract
image = Image.open('image/2.gif')
image=image.convert('L')
threshold =100
table =[]
for i in range(256):
    if i <threshold:
        table.append(0)
    else:
        table.append(1)
image = image.point(table,'1')
image.show()
content = pytesseract.image_to_string(image)
print(content)
